<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Aurora</title>
  <script>
    // after enabling context isolation, renderer.dev.js was loosing reference to global
    // see - https://github.com/webpack/webpack/issues/10035#issuecomment-603231120
    global = globalThis;

    const {
      env,
      port,
    } = window.app;

    if (env !== 'development') {
      const link = document.createElement('link');
      link.rel = 'stylesheet';
      link.href = './dist/style.css';

      // HACK: stylesheet inclusion should be done with webpack
      document.getElementsByTagName('head')[0].appendChild(link);
    }
  </script>
</head>
<body>
<div id="root"></div>
<script>
  const scripts = [];

  if (env === 'development') {
    // dynamically insert the DLL script in development env in the renderer process
    scripts.push('../.erb/dll/renderer.dev.dll.js');

    // dynamically insert the bundled app script in the renderer process
    scripts.push(`http://localhost:${port}/dist/renderer.dev.js`);
  } else {
    scripts.push('./dist/renderer.prod.js');
  }

  if (scripts.length) {
    document.write(scripts
      .map((script) => `<script defer src="${script}"><\/script>`)
      .join(''));
  }
</script>
</body>
</html>
